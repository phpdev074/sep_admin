import{j as e,P as f,Q as d,B as g,T as m,r as l,F as w,L as U,M as N,N as O,R as C,U as S,K as R,O as B,J as F,V as W,W as L,X as $,Y as k,Z as M,$ as E,a0 as G,A as H,G as _,E as z,C as Q,a1 as q,a2 as K,a3 as Y,a4 as P,a5 as J,a6 as V,H as X}from"./index-C2XqsFAq.js";import{C as Z}from"./config-global-BrWtFIcI.js";function ee({searchQuery:n,...i}){return e.jsx(f,{...i,children:e.jsx(d,{align:"center",colSpan:7,children:e.jsxs(g,{sx:{py:15,textAlign:"center"},children:[e.jsx(m,{variant:"h6",sx:{mb:1},children:"Not found"}),e.jsxs(m,{variant:"body2",children:["No results found for Â ",e.jsxs("strong",{children:['"',n,'"']}),".",e.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}function ne({row:n,selected:i,onSelectRow:t}){const[c,r]=l.useState(null),[x,s]=l.useState(!1),o=l.useCallback(a=>{r(a.currentTarget)},[]),p=l.useCallback(()=>{r(null)},[]),v=()=>{s(!0),p()},b=()=>{s(!1)};return l.useCallback(async a=>{window.confirm("Are you sure you want to unblock this user")&&await w.post(`/admin/unBlockUserByadmin?id=${a}`),r(null)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(U,{open:x,onClose:b,fullWidth:!0,maxWidth:"sm",children:[e.jsx(N,{sx:{textAlign:"center",fontWeight:"bold",fontSize:"1.5rem"},children:"ðŸ‘¤ User Details"}),e.jsxs(O,{dividers:!0,sx:{overflowY:"auto",maxHeight:"600px","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",px:3,py:4},children:[e.jsxs(g,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(C,{alt:n.name,src:n.image?`${S}${n.image}`:void 0,sx:{width:100,height:100,mb:1,border:"2px solid #1976d2",boxShadow:2}}),e.jsx(m,{variant:"h6",fontWeight:"medium",children:n.name}),e.jsx(m,{variant:"body2",color:"text.secondary",children:n.email})]}),e.jsx(g,{sx:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:2,backgroundColor:"#f5f5f5",borderRadius:2,p:3,boxShadow:1},children:[{icon:"ic:baseline-phone",label:"Phone",value:n.phone},{icon:"mdi:account",label:"Username",value:n.username||"Not provided"},{icon:"ic:round-male",label:"Gender",value:n.gender},{icon:"mdi:information-outline",label:"Bio",value:n.bio||"Not provided"},{icon:"mdi:security",label:"Role",value:n.role},{icon:"mdi:cake-variant",label:"Date of Birth",value:n.dob?new Date(n.dob).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}):"Not provided"}].map((a,h)=>e.jsxs(g,{display:"flex",alignItems:"center",gap:1,children:[e.jsx(R,{icon:a.icon,width:20,color:"text.secondary"}),e.jsxs(m,{variant:"subtitle2",color:"text.secondary",sx:{minWidth:100},children:[a.label,":"]}),e.jsx(m,{variant:"body2",color:"text.primary",sx:{gridColumn:"span 2"},children:a.value})]},h))})]}),e.jsx(B,{sx:{justifyContent:"center",pb:2},children:e.jsx(F,{onClick:b,color:"primary",variant:"contained",children:"Close"})})]}),e.jsxs(f,{hover:!0,tabIndex:-1,role:"checkbox",selected:i,children:[e.jsx(d,{padding:"checkbox"}),e.jsx(d,{component:"th",scope:"row",children:e.jsx(g,{gap:2,display:"flex",alignItems:"center",children:e.jsx(C,{src:n.image?`${S}${n.image}`:"/default-avatar.png"})})}),e.jsx(d,{children:n.name}),e.jsx(d,{children:n.gender}),e.jsx(d,{children:n.role}),e.jsx(d,{align:"center",children:n.email}),e.jsx(d,{align:"right",children:e.jsx(W,{onClick:o,children:e.jsx(R,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(L,{open:!!c,anchorEl:c,onClose:p,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:e.jsx($,{disablePadding:!0,sx:{p:.5,gap:.5,width:140,display:"flex",flexDirection:"column",[`& .${k.root}`]:{px:1,gap:2,borderRadius:.75,[`&.${k.selected}`]:{bgcolor:"action.selected"}}},children:e.jsx(M,{onClick:v,children:"View Details"})})})]})}const se={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function te(n,i,t){return n?Math.max(0,(1+n)*i-t):0}function D(n,i,t){return i[t]<n[t]?-1:i[t]>n[t]?1:0}function ae(n,i){return n==="desc"?(t,c)=>D(t,c,i):(t,c)=>-D(t,c,i)}function ie({inputData:n,comparator:i,filterName:t}){const c=n.map((r,x)=>[r,x]);return c.sort((r,x)=>{const s=i(r[0],x[0]);return s!==0?s:r[1]-x[1]}),n=c.map(r=>r[0]),t&&(n=n.filter(r=>r.name.toLowerCase().indexOf(t.toLowerCase())!==-1)),n}function oe({order:n,onSort:i,orderBy:t,rowCount:c,headLabel:r,numSelected:x,onSelectAllRows:s}){return e.jsx(E,{children:e.jsxs(f,{children:[e.jsx(d,{padding:"checkbox"}),r.map(o=>e.jsx(d,{align:o.align||"left",sortDirection:t===o.id?n:!1,sx:{width:o.width,minWidth:o.minWidth},children:e.jsxs(G,{hideSortIcon:!0,active:t===o.id,direction:t===o.id?n:"asc",onClick:()=>i(o.id),children:[o.label,t===o.id?e.jsx(g,{sx:{...se},children:n==="desc"?"sorted descending":"sorted ascending"}):null]})},o.id))]})})}function le({emptyRows:n,height:i,sx:t,...c}){return n?e.jsx(f,{sx:{...i&&{height:i*n},...t},...c,children:e.jsx(d,{colSpan:9})}):null}function re(){const[n,i]=l.useState([]),t=async()=>{var h;const a=await w.get("/admin/getDeleteUsers");i((h=a==null?void 0:a.data)==null?void 0:h.data)},{data:c,error:r,isLoading:x}=H({queryKey:["admin/getDeleteUsers"],queryFn:t}),s=ce(),[o,p]=l.useState("");if(x)return e.jsx(g,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:e.jsx(_,{})});const b=!ie({inputData:n,comparator:ae(s.order,s.orderBy),filterName:o}).length&&!!o;return e.jsxs(z,{children:[e.jsx(m,{variant:"h4",flexGrow:.2,children:"Deleted Users"}),e.jsxs(Q,{children:[e.jsx(q,{children:e.jsx(K,{sx:{overflow:"unset"},children:e.jsxs(Y,{sx:{minWidth:800},children:[e.jsx(oe,{order:s.order,orderBy:s.orderBy,rowCount:P.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:a=>s.onSelectAllRows(a,P.map(h=>h.id)),headLabel:[{id:"image",label:"Image"},{id:"name",label:"Name"},{id:"gender",label:"Gender"},{id:"role",label:"Role"},{id:"email",label:"Email",align:"center"},{id:""}]}),e.jsxs(J,{children:[n.length>0?n.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(a=>e.jsx(ne,{row:a,selected:s.selected.includes(a==null?void 0:a._id),onSelectRow:()=>s.onSelectRow(a==null?void 0:a._id)},a==null?void 0:a._id)):e.jsx(f,{children:e.jsx(d,{colSpan:12,align:"center",sx:{py:6},children:e.jsx(g,{sx:{display:"flex",flexDirection:"column",alignItems:"center",color:"text.secondary"},children:e.jsx(m,{variant:"h6",gutterBottom:!0,children:"No users found"})})})}),e.jsx(le,{height:68,emptyRows:te(s.page,s.rowsPerPage,P.length)}),b&&e.jsx(ee,{searchQuery:o})]})]})})}),e.jsx(V,{component:"div",page:s.page,count:n.length,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:s.onChangeRowsPerPage})]})]})}function ce(){const[n,i]=l.useState(0),[t,c]=l.useState("name"),[r,x]=l.useState(5),[s,o]=l.useState([]),[p,v]=l.useState("asc"),b=l.useCallback(u=>{v(t===u&&p==="asc"?"desc":"asc"),c(u)},[p,t]),a=l.useCallback((u,j)=>{if(u){o(j);return}o([])},[]),h=l.useCallback(u=>{const j=s.includes(u)?s.filter(A=>A!==u):[...s,u];o(j)},[s]),y=l.useCallback(()=>{i(0)},[]),T=l.useCallback((u,j)=>{i(j)},[]),I=l.useCallback(u=>{x(parseInt(u.target.value,10)),y()},[y]);return{page:n,order:p,onSort:b,orderBy:t,selected:s,rowsPerPage:r,onSelectRow:h,onResetPage:y,onChangePage:T,onSelectAllRows:a,onChangeRowsPerPage:I}}function ue(){return e.jsxs(e.Fragment,{children:[e.jsx(X,{children:e.jsxs("title",{children:[" ",`block Users - ${Z.appName}`]})}),e.jsx(re,{})]})}export{ue as default};
