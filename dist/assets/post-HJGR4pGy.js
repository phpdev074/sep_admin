import{v as w,a9 as de,_ as v,r as n,w as se,b as ne,aa as he,T as C,j as t,d as O,h as ie,ab as $e,ac as Ie,t as Ce,k as ke,ad as b,ae as R,af as Pe,ag as pe,N as ee,O as P,B as I,F as je,P as ae,Q as ue,R as te,V as Q,U as le,ah as q,M as ge,ai as Te,W as xe,L as be,aj as Re,ak as Se,X as Le,Y as Ae,Z as Ne,$ as me,a0 as fe,a1 as Oe,a2 as De,J as ze,E as Me,C as Ue,a3 as Ve,a4 as Ee,a5 as We,a6 as oe,a7 as Fe,a8 as _e,H as Be}from"./index-L0jsVnlW.js";import{C as He}from"./config-global-CsQpxj4K.js";const Ke=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Qe=e=>{const{classes:a,inset:l,primary:o,secondary:i,dense:m}=e;return ie({root:["root",l&&"inset",m&&"dense",o&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},$e,a)},Ye=w("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:l}=e;return[{[`& .${de.primary}`]:a.primary},{[`& .${de.secondary}`]:a.secondary},a.root,l.inset&&a.inset,l.primary&&l.secondary&&a.multiline,l.dense&&a.dense]}})(({ownerState:e})=>v({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),Ge=n.forwardRef(function(a,l){const o=se({props:a,name:"MuiListItemText"}),{children:i,className:m,disableTypography:c=!1,inset:r=!1,primary:f,primaryTypographyProps:u,secondary:$,secondaryTypographyProps:k}=o,L=ne(o,Ke),{dense:j}=n.useContext(he);let y=f??i,d=$;const g=v({},o,{disableTypography:c,inset:r,primary:!!y,secondary:!!d,dense:j}),x=Qe(g);return y!=null&&y.type!==C&&!c&&(y=t.jsx(C,v({variant:j?"body2":"body1",className:x.primary,component:u!=null&&u.variant?void 0:"span",display:"block"},u,{children:y}))),d!=null&&d.type!==C&&!c&&(d=t.jsx(C,v({variant:"body2",className:x.secondary,color:"text.secondary",display:"block"},k,{children:d}))),t.jsxs(Ye,v({className:O(x.root,m),ownerState:g,ref:l},L,{children:[y,d]}))}),Je=Ie(t.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Xe(e){return ke("MuiChip",e)}const p=Ce("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Ze=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],qe=e=>{const{classes:a,disabled:l,size:o,color:i,iconColor:m,onDelete:c,clickable:r,variant:f}=e,u={root:["root",f,l&&"disabled",`size${b(o)}`,`color${b(i)}`,r&&"clickable",r&&`clickableColor${b(i)}`,c&&"deletable",c&&`deletableColor${b(i)}`,`${f}${b(i)}`],label:["label",`label${b(o)}`],avatar:["avatar",`avatar${b(o)}`,`avatarColor${b(i)}`],icon:["icon",`icon${b(o)}`,`iconColor${b(m)}`],deleteIcon:["deleteIcon",`deleteIcon${b(o)}`,`deleteIconColor${b(i)}`,`deleteIcon${b(f)}Color${b(i)}`]};return ie(u,Xe,a)},we=w("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:l}=e,{color:o,iconColor:i,clickable:m,onDelete:c,size:r,variant:f}=l;return[{[`& .${p.avatar}`]:a.avatar},{[`& .${p.avatar}`]:a[`avatar${b(r)}`]},{[`& .${p.avatar}`]:a[`avatarColor${b(o)}`]},{[`& .${p.icon}`]:a.icon},{[`& .${p.icon}`]:a[`icon${b(r)}`]},{[`& .${p.icon}`]:a[`iconColor${b(i)}`]},{[`& .${p.deleteIcon}`]:a.deleteIcon},{[`& .${p.deleteIcon}`]:a[`deleteIcon${b(r)}`]},{[`& .${p.deleteIcon}`]:a[`deleteIconColor${b(o)}`]},{[`& .${p.deleteIcon}`]:a[`deleteIcon${b(f)}Color${b(o)}`]},a.root,a[`size${b(r)}`],a[`color${b(o)}`],m&&a.clickable,m&&o!=="default"&&a[`clickableColor${b(o)})`],c&&a.deletable,c&&o!=="default"&&a[`deletableColor${b(o)}`],a[f],a[`${f}${b(o)}`]]}})(({theme:e,ownerState:a})=>{const l=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return v({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${p.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${p.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:l,fontSize:e.typography.pxToRem(12)},[`& .${p.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${p.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${p.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${p.icon}`]:v({marginLeft:5,marginRight:-6},a.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},a.iconColor===a.color&&v({color:e.vars?e.vars.palette.Chip.defaultIconColor:l},a.color!=="default"&&{color:"inherit"})),[`& .${p.deleteIcon}`]:v({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:R(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:R(e.palette.text.primary,.4)}},a.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},a.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[a.color].contrastTextChannel} / 0.7)`:R(e.palette[a.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[a.color].contrastText}})},a.size==="small"&&{height:24},a.color!=="default"&&{backgroundColor:(e.vars||e).palette[a.color].main,color:(e.vars||e).palette[a.color].contrastText},a.onDelete&&{[`&.${p.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:R(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},a.onDelete&&a.color!=="default"&&{[`&.${p.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}})},({theme:e,ownerState:a})=>v({},a.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:R(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${p.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:R(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},a.clickable&&a.color!=="default"&&{[`&:hover, &.${p.focusVisible}`]:{backgroundColor:(e.vars||e).palette[a.color].dark}}),({theme:e,ownerState:a})=>v({},a.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${p.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${p.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${p.avatar}`]:{marginLeft:4},[`& .${p.avatarSmall}`]:{marginLeft:2},[`& .${p.icon}`]:{marginLeft:4},[`& .${p.iconSmall}`]:{marginLeft:2},[`& .${p.deleteIcon}`]:{marginRight:5},[`& .${p.deleteIconSmall}`]:{marginRight:3}},a.variant==="outlined"&&a.color!=="default"&&{color:(e.vars||e).palette[a.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.7)`:R(e.palette[a.color].main,.7)}`,[`&.${p.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:R(e.palette[a.color].main,e.palette.action.hoverOpacity)},[`&.${p.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:R(e.palette[a.color].main,e.palette.action.focusOpacity)},[`& .${p.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[a.color].mainChannel} / 0.7)`:R(e.palette[a.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[a.color].main}}})),ea=w("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,a)=>{const{ownerState:l}=e,{size:o}=l;return[a.label,a[`label${b(o)}`]]}})(({ownerState:e})=>v({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.variant==="outlined"&&{paddingLeft:11,paddingRight:11},e.size==="small"&&{paddingLeft:8,paddingRight:8},e.size==="small"&&e.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function ye(e){return e.key==="Backspace"||e.key==="Delete"}const aa=n.forwardRef(function(a,l){const o=se({props:a,name:"MuiChip"}),{avatar:i,className:m,clickable:c,color:r="default",component:f,deleteIcon:u,disabled:$=!1,icon:k,label:L,onClick:j,onDelete:y,onKeyDown:d,onKeyUp:g,size:x="medium",variant:A="filled",tabIndex:D,skipFocusWhenDisabled:M=!1}=o,z=ne(o,Ze),W=n.useRef(null),Y=Pe(W,l),F=s=>{s.stopPropagation(),y&&y(s)},G=s=>{s.currentTarget===s.target&&ye(s)&&s.preventDefault(),d&&d(s)},J=s=>{s.currentTarget===s.target&&(y&&ye(s)?y(s):s.key==="Escape"&&W.current&&W.current.blur()),g&&g(s)},U=c!==!1&&j?!0:c,V=U||y?pe:f||"div",E=v({},o,{component:V,disabled:$,size:x,color:r,iconColor:n.isValidElement(k)&&k.props.color||r,onDelete:!!y,clickable:U,variant:A}),T=qe(E),X=V===pe?v({component:f||"div",focusVisibleClassName:T.focusVisible},y&&{disableRipple:!0}):{};let _=null;y&&(_=u&&n.isValidElement(u)?n.cloneElement(u,{className:O(u.props.className,T.deleteIcon),onClick:F}):t.jsx(Je,{className:O(T.deleteIcon),onClick:F}));let B=null;i&&n.isValidElement(i)&&(B=n.cloneElement(i,{className:O(T.avatar,i.props.className)}));let H=null;return k&&n.isValidElement(k)&&(H=n.cloneElement(k,{className:O(T.icon,k.props.className)})),t.jsxs(we,v({as:V,className:O(T.root,m),disabled:U&&$?!0:void 0,onClick:j,onKeyDown:G,onKeyUp:J,ref:Y,tabIndex:M&&$?-1:D,ownerState:E},X,z,{children:[B||H,t.jsx(ea,{className:O(T.label),ownerState:E,children:L}),_]}))});function ta(e){return ke("MuiListItemAvatar",e)}Ce("MuiListItemAvatar",["root","alignItemsFlexStart"]);const la=["className"],oa=e=>{const{alignItems:a,classes:l}=e;return ie({root:["root",a==="flex-start"&&"alignItemsFlexStart"]},ta,l)},sa=w("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:l}=e;return[a.root,l.alignItems==="flex-start"&&a.alignItemsFlexStart]}})(({ownerState:e})=>v({minWidth:56,flexShrink:0},e.alignItems==="flex-start"&&{marginTop:8})),na=n.forwardRef(function(a,l){const o=se({props:a,name:"MuiListItemAvatar"}),{className:i}=o,m=ne(o,la),c=n.useContext(he),r=v({},o,{alignItems:c.alignItems}),f=oa(r);return t.jsx(sa,v({className:O(f.root,i),ownerState:r,ref:l},m))});function ia({searchQuery:e,...a}){return t.jsx(ee,{...a,children:t.jsx(P,{align:"center",colSpan:7,children:t.jsxs(I,{sx:{py:15,textAlign:"center"},children:[t.jsx(C,{variant:"h6",sx:{mb:1},children:"Not found"}),t.jsxs(C,{variant:"body2",children:["No results found for Â ",t.jsxs("strong",{children:['"',e,'"']}),".",t.jsx("br",{})," Try checking for typos or using complete words."]})]})})})}function ra({row:e,selected:a,onSelectRow:l,onDeletePost:o}){var Y,F,G,J,U,V,E,T,X,_,B,H;const[i,m]=n.useState(null),[c,r]=n.useState(!1);n.useState(e.content);const[f,u]=n.useState(null),[$,k]=n.useState(!1),[L,j]=n.useState(!1),y=()=>{z(),r(!1)},d=()=>r(!0);n.useState(null),n.useState(null);const g=s=>{u(s),k(!0)},x=()=>{k(!1),u(null)},A=()=>{console.log("Opening voted users modal..."),console.log("Row votes:",e==null?void 0:e.votes),console.log("File type:",e==null?void 0:e.fileType),j(!0)},D=()=>{j(!1)},M=n.useCallback(s=>{m(s.currentTarget)},[]),z=n.useCallback(()=>{m(null)},[]),W=n.useCallback(async s=>{if(window.confirm("Are you sure you want to delete the post"))try{const N=await je.delete(`/api/post?id=${s}`);o(s)}catch(N){console.error("Error deleting post:",N)}},[o]);return t.jsxs(t.Fragment,{children:[t.jsxs(ae,{open:c,onClose:y,fullWidth:!0,maxWidth:"md",children:[t.jsx(ue,{sx:{textAlign:"center",fontWeight:"bold",fontSize:"1.5rem"},children:"ðŸ‘ï¸ View Post"}),t.jsxs(te,{dividers:!0,sx:{overflowY:"auto",maxHeight:"600px","&::-webkit-scrollbar":{display:"none"},scrollbarWidth:"none",px:3,py:4},children:[t.jsx(I,{sx:{display:"flex",justifyContent:"center",mb:3},children:((F=(Y=e==null?void 0:e.files)==null?void 0:Y[0])==null?void 0:F.type)==="video"?t.jsx(I,{component:"video",src:`${Q}${(J=(G=e==null?void 0:e.files)==null?void 0:G[0])==null?void 0:J.file}`,controls:!0,preload:"metadata",onError:s=>{const S=s.target;S.style.display="none"},sx:{width:160,height:160,borderRadius:2,boxShadow:2,border:"2px solid #1976d2",cursor:"pointer",transition:"transform 0.4s ease-in-out","&:hover":{transform:"scale(1.3)",zIndex:1},"&::-webkit-media-controls":{display:"none"}}}):t.jsx(le,{src:`${Q}${(V=(U=e==null?void 0:e.files)==null?void 0:U[0])==null?void 0:V.file}`,alt:"Post Image",variant:"rounded",sx:{width:160,height:160,boxShadow:2,border:"2px solid #1976d2",cursor:"pointer",transition:"transform 0.4s ease-in-out","&:hover":{transform:"scale(1.3)",zIndex:1}}})}),t.jsx(C,{variant:"subtitle1",fontWeight:"bold",mb:1,children:"Content:"}),t.jsx(C,{variant:"body1",mb:3,children:e.content||"N/A"}),t.jsx(I,{sx:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:2,backgroundColor:"#f5f5f5",borderRadius:2,p:3,boxShadow:1},children:(()=>{var N,K,re,ce;const s=(N=e==null?void 0:e.files)==null?void 0:N.some(h=>h.type==="image");return[{icon:"mdi:tag-outline",label:"Category",value:(typeof(e==null?void 0:e.categoryId)=="object"?(K=e==null?void 0:e.categoryId)==null?void 0:K.name:e==null?void 0:e.categoryId)||"N/A",isClickable:!1,onClick:void 0},{icon:"mdi:earth",label:"Country",value:e!=null&&e.country&&(e==null?void 0:e.country.trim())!==""?e==null?void 0:e.country:"N/A",isClickable:!1,onClick:void 0},{icon:"mdi:account",label:"Name",value:((re=e==null?void 0:e.userId)==null?void 0:re.name)||"N/A",isClickable:!1,onClick:void 0},...e.startTime?[{icon:"mdi:clock-start",label:"Start Time",value:q(new Date(e==null?void 0:e.startTime),"PPpp"),isClickable:!1,onClick:void 0}]:[],...e.endTime?[{icon:"mdi:clock-end",label:"End Time",value:q(new Date(e==null?void 0:e.endTime),"PPpp"),isClickable:!1,onClick:void 0}]:[],...e.duration?[{icon:"mdi:timer-outline",label:"Duration",value:`${e==null?void 0:e.duration} seconds`,isClickable:!1,onClick:void 0}]:[],...s?[]:[{icon:"mdi:eye-outline",label:(e==null?void 0:e.fileType)==="poll"?"Voted Users":"Video Count",value:(e==null?void 0:e.fileType)==="poll"?t.jsxs(I,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.jsx(C,{variant:"body2",color:"text.primary",children:(()=>{var h,Z;return console.log("Votes data:",e==null?void 0:e.votes),console.log("Votes length:",(h=e==null?void 0:e.votes)==null?void 0:h.length),console.log("Votes type:",typeof(e==null?void 0:e.votes)),((Z=e==null?void 0:e.votes)==null?void 0:Z.length)??0})()}),(((ce=e==null?void 0:e.votes)==null?void 0:ce.length)??0)>0&&t.jsx(aa,{label:"View List",size:"small",variant:"outlined",clickable:!0,onClick:A,sx:{fontSize:"0.7rem",height:"20px",borderRadius:"10px",backgroundColor:"rgba(25, 118, 210, 0.08)",borderColor:"#1976d2",color:"#1976d2","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.12)",borderColor:"#1565c0"}}})]}):(e==null?void 0:e.videoCount)??0,isClickable:!1,onClick:void 0}],{icon:"mdi:calendar-plus",label:"Created At",value:q(new Date(e==null?void 0:e.createdAt),"PP"),isClickable:!1,onClick:void 0}].map((h,Z)=>t.jsxs(I,{display:"flex",alignItems:"center",gap:1,children:[t.jsx(ge,{icon:h.icon,width:20,color:"text.secondary"}),t.jsxs(C,{variant:"subtitle2",color:"text.secondary",children:[h.label,":"]}),t.jsx(I,{sx:{gridColumn:"span 2",display:"flex",alignItems:"center"},children:Te.isValidElement(h.value)?h.value:t.jsx(C,{variant:"body2",color:h.isClickable?"primary.main":"text.primary",sx:{cursor:h.isClickable?"pointer":"default",textDecoration:h.isClickable?"underline":"none","&:hover":h.isClickable?{color:"primary.dark"}:{}},onClick:h.onClick||void 0,children:String(h.value)})})]},Z))})()})]}),t.jsx(xe,{sx:{justifyContent:"center",pb:2},children:t.jsx(be,{onClick:y,color:"primary",variant:"outlined",children:"Close"})})]}),t.jsxs(ae,{open:L,onClose:D,fullWidth:!0,maxWidth:"sm",children:[t.jsxs(ue,{sx:{textAlign:"center",fontWeight:"bold",fontSize:"1.5rem"},children:["ðŸ‘¥ Voted Users (",((E=e==null?void 0:e.voteUsers)==null?void 0:E.length)??0,")"]}),t.jsx(te,{dividers:!0,sx:{p:0},children:((T=e==null?void 0:e.votes)==null?void 0:T.length)>0?t.jsx(Re,{sx:{width:"100%",bgcolor:"background.paper"},children:(X=e==null?void 0:e.voteUsers)==null?void 0:X.map((s,S)=>{var N,K;return t.jsxs(Se,{sx:{borderBottom:S<e.votes.length-1?"1px solid #f0f0f0":"none",py:2},children:[t.jsx(na,{children:t.jsx(le,{src:s!=null&&s.image?`${Q}${s.image}`:void 0,sx:{width:50,height:50},children:((K=(N=s==null?void 0:s.name)==null?void 0:N.charAt(0))==null?void 0:K.toUpperCase())||"U"})}),t.jsx(Ge,{primary:t.jsx(C,{variant:"subtitle1",fontWeight:"bold",children:(s==null?void 0:s.name)||"Unknown User"}),secondary:t.jsxs(I,{children:[t.jsx(C,{variant:"body2",color:"text.secondary",children:(s==null?void 0:s.email)||"No email"}),(s==null?void 0:s.option)&&t.jsx(C,{variant:"caption",color:"primary.main",sx:{fontWeight:"bold"}})]})})]},s._id||S)})}):t.jsx(I,{sx:{textAlign:"center",py:4},children:t.jsx(C,{variant:"h6",color:"text.secondary",children:"No votes yet"})})}),t.jsx(xe,{sx:{justifyContent:"center",pb:2},children:t.jsx(be,{onClick:D,color:"primary",variant:"outlined",children:"Close"})})]}),t.jsxs(ee,{hover:!0,tabIndex:-1,role:"checkbox",selected:a,children:[t.jsx(P,{padding:"checkbox"}),t.jsx(P,{component:"th",scope:"row",children:t.jsx(I,{gap:2,display:"flex",alignItems:"center",children:t.jsx(I,{sx:{width:40,height:40,borderRadius:"50%",overflow:"visible",cursor:"pointer",transition:"transform 0.4s ease-in-out","&:hover":{transform:"scale(1.3)",zIndex:1}},onClick:()=>{var s,S;return g(`${Q}${(S=(s=e.files)==null?void 0:s[0])==null?void 0:S.file}`)},children:t.jsx(le,{src:`${Q}${(B=(_=e==null?void 0:e.files)==null?void 0:_[0])==null?void 0:B.file}`,sx:{width:"120%",height:"120%"}})})})}),t.jsx(P,{children:(e==null?void 0:e.fileType)||"N/A"}),t.jsx(P,{children:(e==null?void 0:e.content.slice(0,30))||"N/A"}),t.jsx(P,{children:((H=e==null?void 0:e.userId)==null?void 0:H.name)||"N/A"}),t.jsx(P,{children:q(new Date(e==null?void 0:e.createdAt),"PP")}),t.jsx(P,{align:"right",children:t.jsx(Le,{onClick:M,children:t.jsx(ge,{icon:"eva:more-vertical-fill"})})})]}),t.jsx(Ae,{open:!!i,anchorEl:i,onClose:z,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:t.jsxs(Ne,{disablePadding:!0,sx:{p:.5,gap:.5,width:140,display:"flex",flexDirection:"column",[`& .${me.root}`]:{px:1,gap:2,borderRadius:.75,[`&.${me.selected}`]:{bgcolor:"action.selected"}}},children:[t.jsx(fe,{onClick:d,children:"View Details"}),t.jsx(fe,{onClick:()=>W(e==null?void 0:e._id),sx:{color:"error.main"},children:"Delete"})]})}),t.jsx(ae,{open:$,onClose:x,maxWidth:"md",fullWidth:!0,children:t.jsx(te,{sx:{p:0,bgcolor:"black"},children:t.jsx("img",{src:f||void 0,alt:"Post Preview",style:{width:"100%",maxHeight:"80vh",objectFit:"contain",display:"block",margin:"auto"},onClick:x})})})]})}const ca={border:0,margin:-1,padding:0,width:"1px",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",clip:"rect(0 0 0 0)"};function da(e,a,l){return e?Math.max(0,(1+e)*a-l):0}function ve(e,a,l){return a[l]<e[l]?-1:a[l]>e[l]?1:0}function pa(e,a){return e==="desc"?(l,o)=>ve(l,o,a):(l,o)=>-ve(l,o,a)}function ua({inputData:e,comparator:a,filterName:l}){const o=e.map((i,m)=>[i,m]);return o.sort((i,m)=>{const c=a(i[0],m[0]);return c!==0?c:i[1]-m[1]}),e=o.map(i=>i[0]),l&&(e=e.filter(i=>i.name.toLowerCase().indexOf(l.toLowerCase())!==-1)),e}function ga({order:e,onSort:a,orderBy:l,rowCount:o,headLabel:i,numSelected:m,onSelectAllRows:c}){return t.jsx(Oe,{children:t.jsxs(ee,{children:[t.jsx(P,{padding:"checkbox"}),i.map(r=>t.jsx(P,{align:r.align||"left",sortDirection:l===r.id?e:!1,sx:{width:r.width,minWidth:r.minWidth},children:t.jsxs(De,{hideSortIcon:!0,active:l===r.id,direction:l===r.id?e:"asc",onClick:()=>a(r.id),children:[r.label,l===r.id?t.jsx(I,{sx:{...ca},children:e==="desc"?"sorted descending":"sorted ascending"}):null]})},r.id))]})})}function xa({emptyRows:e,height:a,sx:l,...o}){return e?t.jsx(ee,{sx:{...a&&{height:a*e},...l},...o,children:t.jsx(P,{colSpan:9})}):null}function ba(){const[e,a]=n.useState([]),[l,o]=n.useState(0),[i,m]=n.useState(!1),[c,r]=n.useState({limit:10,page:0}),f=async(d,g)=>{var A,D,M,z;const x=await je.get(`/admin/getAllPost?limit=${d}&page=${g+1}`);a((D=(A=x==null?void 0:x.data)==null?void 0:A.data)==null?void 0:D.response),o((z=(M=x==null?void 0:x.data)==null?void 0:M.data)==null?void 0:z.total)};n.useEffect(()=>{f(c.limit,c.page)},[c.limit,c.page]);const u=ma(),[$,k]=n.useState("");if(i)return t.jsx(I,{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",children:t.jsx(ze,{})});const j=!ua({inputData:e,comparator:pa(u.order,u.orderBy),filterName:$}).length&&!!$,y=d=>{a(g=>g.filter(x=>x._id!==d))};return t.jsx(Me,{children:t.jsxs(Ue,{children:[t.jsx(Ve,{children:t.jsx(Ee,{sx:{overflow:"unset"},children:t.jsxs(We,{sx:{minWidth:800},children:[t.jsx(ga,{order:u.order,orderBy:u.orderBy,rowCount:oe.length,numSelected:u.selected.length,onSort:u.onSort,onSelectAllRows:d=>u.onSelectAllRows(d,oe.map(g=>g.id)),headLabel:[{id:"files",label:"Image"},{id:"type",label:"Type"},{id:"content",label:"Content"},{id:"username",label:"Username"},{id:"createdAt",label:"Create Time"},{id:""}]}),t.jsxs(Fe,{children:[e.map(d=>t.jsx(ra,{row:d,selected:u.selected.includes(d==null?void 0:d._id),onSelectRow:()=>u.onSelectRow(d==null?void 0:d._id),onDeletePost:y},d==null?void 0:d._id)),t.jsx(xa,{height:68,emptyRows:da(u.page,u.rowsPerPage,oe.length)}),j&&t.jsx(ia,{searchQuery:$})]})]})})}),t.jsx(_e,{component:"div",page:c.page,count:l,rowsPerPage:c.limit,onPageChange:(d,g)=>{r(x=>({...x,page:g})),u.setPage(g)},rowsPerPageOptions:[5,10,25],onRowsPerPageChange:d=>{var x;const g=parseInt(d.target.value,10);r({page:0,limit:g}),(x=u.setRowsPerPage)==null||x.call(u,g)}})]})})}function ma(){const[e,a]=n.useState(0),[l,o]=n.useState("name"),[i,m]=n.useState(5),[c,r]=n.useState([]),[f,u]=n.useState("asc"),$=n.useCallback(g=>{u(l===g&&f==="asc"?"desc":"asc"),o(g)},[f,l]),k=n.useCallback((g,x)=>{if(g){r(x);return}r([])},[]),L=n.useCallback(g=>{const x=c.includes(g)?c.filter(A=>A!==g):[...c,g];r(x)},[c]),j=n.useCallback(()=>{a(0)},[]),y=n.useCallback((g,x)=>{a(x)},[]),d=n.useCallback(g=>{m(parseInt(g.target.value,10)),j()},[j]);return{page:e,order:f,onSort:$,orderBy:l,selected:c,rowsPerPage:i,onSelectRow:L,onResetPage:j,onChangePage:y,onSelectAllRows:k,onChangeRowsPerPage:d,setPage:a,setRowsPerPage:m}}function va(){return t.jsxs(t.Fragment,{children:[t.jsx(Be,{children:t.jsxs("title",{children:[" ",`Users - ${He.appName}`]})}),t.jsx(ba,{})]})}export{va as default};
