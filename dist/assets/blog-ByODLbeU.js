import{r as s,j as e,E as ue,B as l,G as fe,I as _,T as i,J as P,K as c,L as d,F as g,M as X,N as xe,O as pe,P as Ce,Q as je,H as we}from"./index-BsMPmqOU.js";import{C as Se}from"./config-global-CsQpxj4K.js";const I={faq:"FAQ",terms:"Terms and Conditions",privacy:"Privacy Policy"},ve={faq:"Here are some frequently asked questions...",terms:"These are the terms and conditions of our service...",privacy:"This is the privacy policy of our website..."};function ye(){const[u,Y]=s.useState("settings"),[Z,f]=s.useState(!1),[x,ee]=s.useState(void 0),[T,N]=s.useState(""),[p,F]=s.useState(""),[C,D]=s.useState(""),[te,W]=s.useState(""),[ae,z]=s.useState(""),[se,B]=s.useState(!0),[$,O]=s.useState(""),[H,q]=s.useState(!1),[h,L]=s.useState(""),[ne,R]=s.useState(!1),[U,v]=s.useState(""),[G,re]=s.useState(!1),[M,y]=s.useState(!1),[j,b]=s.useState(30),[w,A]=s.useState(5),[oe,k]=s.useState(30),[ie,E]=s.useState(5),[le,Q]=s.useState(!1),[J,K]=s.useState(!1),[V,S]=s.useState("");s.useEffect(()=>{(async()=>{var r,n,m;B(!0),O("");try{const o=localStorage.getItem("token");if(!o)throw new Error("No auth token found");const a=(r=(await g.get("/admin/getAdmin",{headers:{Authorization:`Bearer ${o}`}})).data)==null?void 0:r.data;F(a.name||""),D(a.email||""),W(a.name||""),z(a.email||""),b(a==null?void 0:a.commission),A(a==null?void 0:a.transactionCharge),k(a==null?void 0:a.commission),E(a==null?void 0:a.transactionCharge)}catch(o){O(((m=(n=o.response)==null?void 0:n.data)==null?void 0:m.message)||o.message||"Failed to load admin data")}finally{B(!1)}})()},[]),s.useEffect(()=>{u==="charges"&&(async()=>{var r,n,m;Q(!0),S("");try{const o=localStorage.getItem("token");if(!o)throw new Error("No auth token found");const a=(r=(await g.get("/admin/getAdmin",{headers:{Authorization:`Bearer ${o}`}})).data)==null?void 0:r.data;b(a==null?void 0:a.commission),A(a==null?void 0:a.transactionCharge),k(a==null?void 0:a.commission),E(a==null?void 0:a.transactionCharge)}catch(o){S(((m=(n=o.response)==null?void 0:n.data)==null?void 0:m.message)||o.message||"Failed to load charges")}finally{Q(!1)}})()},[u]);const ce=(t,r)=>{Y(r)},de=async()=>{var t,r;K(!0),S("");try{const n=localStorage.getItem("token");if(!n)throw new Error("No auth token found");await g.put("/admin/editAdmin",{commission:j,transactionCharge:w},{headers:{Authorization:`Bearer ${n}`}}),k(j),E(w)}catch(n){S(((r=(t=n.response)==null?void 0:t.data)==null?void 0:r.message)||n.message||"Failed to update charges")}finally{K(!1)}},he=j!==oe||w!==ie,me=()=>e.jsxs(l,{sx:{width:400,p:3,borderRadius:2,boxShadow:2,backgroundColor:"#f9f9f9",display:"flex",flexDirection:"column",gap:3,marginLeft:"371px"},children:[e.jsx(i,{variant:"h6",mb:1,children:"Charges Settings"}),le?e.jsx(l,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:100,children:e.jsx(P,{})}):V?e.jsx(i,{color:"error",children:V}):e.jsxs(e.Fragment,{children:[e.jsx(c,{label:"Commission Charge (%)",type:"number",inputProps:{min:0,max:100,step:.1},value:j,onChange:t=>b(parseFloat(t.target.value)),fullWidth:!0}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Commission charge applied on each transaction"}),e.jsx(c,{label:"Transaction Charge (%)",type:"number",inputProps:{min:0,max:100,step:.1},value:w,onChange:t=>A(parseFloat(t.target.value)),fullWidth:!0}),e.jsx(i,{variant:"body2",color:"text.secondary",children:"Transaction charge applied on each withdrawal"}),e.jsx(d,{variant:"contained",onClick:de,disabled:J||!he,sx:{alignSelf:"flex-end",width:"350px"},children:J?"Saving...":"Save Charges"})]})]});return e.jsxs(ue,{children:[e.jsx(l,{sx:{width:"100%",mb:3},children:e.jsxs(fe,{value:u,onChange:ce,centered:!0,children:[e.jsx(_,{label:"Settings",value:"settings"}),e.jsx(_,{label:"Charges",value:"charges"})]})}),u==="settings"?e.jsxs(l,{display:"flex",flexDirection:"column",alignItems:"center",mb:5,children:[e.jsxs(l,{sx:{width:400,p:2,mb:4,borderRadius:2,boxShadow:2,backgroundColor:"#f9f9f9",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(i,{variant:"h6",children:"Admin Info"}),se?e.jsx(l,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:100,children:e.jsx(P,{})}):$?e.jsx(i,{color:"error",children:$}):e.jsxs(e.Fragment,{children:[e.jsx(c,{label:"Name",value:p,fullWidth:!0,onChange:t=>F(t.target.value)}),e.jsx(c,{label:"Email",value:C,fullWidth:!0,onChange:t=>D(t.target.value)}),(p!==te||C!==ae)&&e.jsx(d,{variant:"contained",onClick:async()=>{var t,r;q(!0);try{const n=localStorage.getItem("token");if(!n)throw new Error("No auth token found");await g.put("/admin/editAdmin",{name:p,email:C},{headers:{Authorization:`Bearer ${n}`}}),W(p),z(C)}catch(n){alert(((r=(t=n.response)==null?void 0:t.data)==null?void 0:r.message)||n.message||"Failed to update admin info")}finally{q(!1)}},disabled:H,sx:{alignSelf:"flex-end",mt:1},children:H?"Saving...":"Save"}),e.jsx(i,{variant:"subtitle1",mt:3,children:"Change Password"}),e.jsx(c,{label:"New Password",type:G?"text":"password",value:h,onChange:t=>L(t.target.value),fullWidth:!0,size:"small",InputProps:{endAdornment:e.jsx(d,{onClick:()=>re(t=>!t),size:"small",sx:{minWidth:"auto",ml:1},children:G?e.jsx(X,{icon:"eva:eye-off-fill",width:20}):e.jsx(X,{icon:"eva:eye-fill",width:20})})}}),U&&e.jsx(i,{color:"error",variant:"body2",children:U}),ne&&e.jsx(i,{color:"success.main",variant:"body2",children:"Password updated successfully!"}),e.jsx(d,{variant:"contained",size:"small",sx:{mt:1},onClick:async()=>{var t,r;v(""),y(!0);try{const n=localStorage.getItem("token");if(!n)throw new Error("No auth token found");if(!h||h.length<6){v("Password must be at least 6 characters long."),y(!1);return}await g.put("/admin/editAdmin",{password:h},{headers:{Authorization:`Bearer ${n}`}}),R(!0),L(""),setTimeout(()=>R(!1),3e3)}catch(n){v(((r=(t=n.response)==null?void 0:t.data)==null?void 0:r.message)||n.message)}finally{y(!1)}},disabled:!h||M,children:M?e.jsx(P,{size:20,color:"inherit"}):"Update Password"})]})]}),e.jsx(l,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:2,flexWrap:"wrap",mb:4,children:Object.entries(I).map(([t,r])=>e.jsx(l,{display:"flex",justifyContent:"center",alignItems:"center",sx:{width:250,height:60,borderRadius:2,boxShadow:2,backgroundColor:"#f0f0f0",cursor:"pointer","&:hover":{backgroundColor:"#e0e0e0"}},onClick:()=>{ee(t),N(ve[t]),f(!0)},children:e.jsx(i,{variant:"h6",children:r})},t))}),e.jsxs(xe,{open:Z,onClose:()=>f(!1),maxWidth:"lg",fullWidth:!0,sx:{minHeight:"450px"},children:[e.jsxs(pe,{children:["Edit ",x&&I[x]]}),e.jsx(Ce,{children:e.jsx(c,{fullWidth:!0,label:`${I[x??"faq"]||"Unknown"} Content`,multiline:!0,rows:8,value:T,onChange:t=>N(t.target.value),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{height:"auto"}}})}),e.jsxs(je,{children:[e.jsx(d,{onClick:()=>f(!1),color:"primary",children:"Cancel"}),e.jsx(d,{onClick:()=>{console.log(`Saving ${x}:`,T),f(!1)},color:"primary",children:"Save"})]})]})]}):me()]})}function ke(){return e.jsxs(e.Fragment,{children:[e.jsx(we,{children:e.jsxs("title",{children:[" ",`Blog - ${Se.appName}`]})}),e.jsx(ye,{})]})}export{ke as default};
