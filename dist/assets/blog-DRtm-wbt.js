import{r as a,j as e,E as te,B as l,T as o,G as $,I as g,J as d,K as q,L as ae,M as se,N as ne,O as oe,F as p,H as ie}from"./index-C2XqsFAq.js";import{C as re}from"./config-global-BrWtFIcI.js";const w={faq:"FAQ",terms:"Terms and Conditions",privacy:"Privacy Policy"},le={faq:"Here are some frequently asked questions...",terms:"These are the terms and conditions of our service...",privacy:"This is the privacy policy of our website..."};function de(){const[H,f]=a.useState(!1),[c,U]=a.useState(void 0),[j,C]=a.useState(""),[m,y]=a.useState(""),[h,S]=a.useState(""),[L,v]=a.useState(""),[R,A]=a.useState(""),[G,b]=a.useState(!0),[k,P]=a.useState(""),[E,I]=a.useState(!1),[i,N]=a.useState(""),[M,D]=a.useState(!1),[T,x]=a.useState(""),[F,V]=a.useState(!1),[O,W]=a.useState(!1);a.useEffect(()=>{(async()=>{var n,s,B;b(!0),P("");try{const r=localStorage.getItem("token");if(!r)throw new Error("No auth token found");const u=(n=(await p.get("/admin/getAdmin",{headers:{Authorization:`Bearer ${r}`}})).data)==null?void 0:n.data;y(u.name||""),S(u.email||""),v(u.name||""),A(u.email||"")}catch(r){P(((B=(s=r.response)==null?void 0:s.data)==null?void 0:B.message)||r.message||"Failed to load admin data")}finally{b(!1)}})()},[]);const J=t=>{U(t),C(le[t]),f(!0)},z=()=>{f(!1)},K=()=>{console.log(`Saving ${c}:`,j),f(!1)},Q=t=>y(t.target.value),X=t=>S(t.target.value),Y=m!==L||h!==R,Z=async()=>{var t,n;I(!0);try{const s=localStorage.getItem("token");if(!s)throw new Error("No auth token found");await p.put("/admin/editAdmin",{name:m,email:h},{headers:{Authorization:`Bearer ${s}`}}),v(m),A(h)}catch(s){alert(((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||s.message||"Failed to update admin info")}finally{I(!1)}},_=async()=>{var t,n;x(""),W(!0);try{const s=localStorage.getItem("token");if(!s)throw new Error("No auth token found");if(!i||i.length<6){x("Password must be at least 6 characters long.");return}await p.put("/admin/editAdmin",{password:i},{headers:{Authorization:`Bearer ${s}`}}),D(!0),N(""),setTimeout(()=>D(!1),3e3)}catch(s){x(((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||s.message)}finally{W(!1)}},ee=()=>{V(t=>!t)};return e.jsxs(te,{children:[e.jsxs(l,{display:"flex",flexDirection:"column",alignItems:"center",mb:5,children:[e.jsx(o,{variant:"h4",mb:3,children:"Settings"}),e.jsxs(l,{sx:{width:400,p:2,mb:4,borderRadius:2,boxShadow:2,backgroundColor:"#f9f9f9",display:"flex",flexDirection:"column",gap:2},children:[e.jsx(o,{variant:"h6",children:"Admin Info"}),G?e.jsx(l,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:100,children:e.jsx($,{})}):k?e.jsx(o,{color:"error",children:k}):e.jsxs(e.Fragment,{children:[e.jsx(g,{label:"Name",value:m,fullWidth:!0,onChange:Q}),e.jsx(g,{label:"Email",value:h,fullWidth:!0,onChange:X}),Y&&e.jsx(d,{variant:"contained",onClick:Z,disabled:E,sx:{alignSelf:"flex-end",mt:1},children:E?"Saving...":"Save"}),e.jsx(o,{variant:"subtitle1",mt:3,children:"Change Password"}),e.jsx(g,{label:"New Password",type:F?"text":"password",value:i,onChange:t=>N(t.target.value),fullWidth:!0,size:"small",InputProps:{endAdornment:e.jsx(d,{onClick:ee,size:"small",sx:{minWidth:"auto",ml:1},children:F?e.jsx(q,{icon:"eva:eye-off-fill",width:20}):e.jsx(q,{icon:"eva:eye-fill",width:20})})}}),T&&e.jsx(o,{color:"error",variant:"body2",children:T}),M&&e.jsx(o,{color:"success.main",variant:"body2",children:"Password updated successfully!"}),e.jsx(d,{variant:"contained",size:"small",sx:{mt:1},onClick:_,disabled:!i||O,children:O?e.jsx($,{size:20,color:"inherit"}):"Update Password"})]})]}),e.jsx(l,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:2,flexWrap:"wrap",mb:4,children:Object.entries(w).map(([t,n])=>e.jsx(l,{display:"flex",justifyContent:"center",alignItems:"center",sx:{width:250,height:60,borderRadius:2,boxShadow:2,backgroundColor:"#f0f0f0",cursor:"pointer","&:hover":{backgroundColor:"#e0e0e0"}},onClick:()=>J(t),children:e.jsx(o,{variant:"h6",children:n})},t))})]}),e.jsxs(ae,{open:H,onClose:z,maxWidth:"lg",fullWidth:!0,sx:{minHeight:"450px"},children:[e.jsxs(se,{children:["Edit ",c&&w[c]]}),e.jsx(ne,{children:e.jsx(g,{fullWidth:!0,label:`${w[c??"faq"]||"Unknown"} Content`,multiline:!0,rows:8,value:j,onChange:t=>C(t.target.value),variant:"outlined",sx:{"& .MuiOutlinedInput-root":{height:"auto"}}})}),e.jsxs(oe,{children:[e.jsx(d,{onClick:z,color:"primary",children:"Cancel"}),e.jsx(d,{onClick:K,color:"primary",children:"Save"})]})]})]})}function ue(){return e.jsxs(e.Fragment,{children:[e.jsx(ie,{children:e.jsxs("title",{children:[" ",`Blog - ${re.appName}`]})}),e.jsx(de,{})]})}export{ue as default};
